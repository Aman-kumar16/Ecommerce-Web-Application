{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Aman Kumar\\\\Desktop\\\\internship\\\\ecommerce\\\\ecommerce-frontend\\\\ecommerce\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Credentials } from 'src/app/common/credentials';\nimport { Customer } from 'src/app/common/customer';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/authentication.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" Invalid login credentials please check!!! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Enter a valid email address \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, LoginComponent_div_13_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginComponent_div_13_div_2_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.email == null ? null : ctx_r1.email.errors == null ? null : ctx_r1.email.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.email == null ? null : ctx_r1.email.errors == null ? null : ctx_r1.email.errors[\"pattern\"]);\n  }\n}\n\nfunction LoginComponent_div_19_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_19_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Enter a valid password.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"must contain a uppercase, lowecase , special character and digit. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"should be at least of 8 characters.\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtemplate(1, LoginComponent_div_19_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginComponent_div_19_div_2_Template, 7, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.password == null ? null : ctx_r2.password.errors == null ? null : ctx_r2.password.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.password == null ? null : ctx_r2.password.errors == null ? null : ctx_r2.password.errors[\"pattern\"]);\n  }\n}\n\nexport class LoginComponent {\n  constructor(formbuilder, authenticationService, router) {\n    this.formbuilder = formbuilder;\n    this.authenticationService = authenticationService;\n    this.router = router;\n    this.customer = new Customer();\n    this.isLoggedIn = false;\n    this.loginFormGroup = new FormGroup({});\n    this.invalidCredentials = false;\n  }\n\n  ngOnInit() {\n    this.loginFormGroup = this.formbuilder.group({\n      customerLogin: this.formbuilder.group({\n        email: new FormControl('', [Validators.required, Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')]),\n        password: new FormControl('', [Validators.required, Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}')])\n      })\n    });\n  } // getter for customer-login\n\n\n  get email() {\n    return this.loginFormGroup.get('customerLogin.email');\n  }\n\n  get password() {\n    return this.loginFormGroup.get('customerLogin.password');\n  }\n\n  onSubmit() {\n    var _a, _b;\n\n    console.log(\"submitting the login credentials\");\n\n    if (this.loginFormGroup.invalid) {\n      // so that every field which is not filled correctly shows error on submission until they gets correct data filled.\n      this.loginFormGroup.markAllAsTouched();\n      return;\n    } //email and password are of valid form thus check for login\n\n\n    let credentials = new Credentials();\n    credentials.email = (_a = this.email) === null || _a === void 0 ? void 0 : _a.value;\n    credentials.password = (_b = this.password) === null || _b === void 0 ? void 0 : _b.value;\n    this.authenticationService.generateToken(credentials).subscribe(response => {\n      //success\n      console.log(response.token);\n      this.authenticationService.loginCustomer(response.token);\n      this.router.navigate(['products']);\n      this.invalidCredentials = false;\n      this.isLoggedIn = this.authenticationService.isLoggedIn();\n      console.log(\"login successfull\");\n    }, error => {\n      this.invalidCredentials = true;\n      console.log(\"token not generated exception occured\");\n    });\n    this.delay(5000);\n    console.log(\"Is customer logged in \" + this.isLoggedIn);\n\n    if (this.isLoggedIn) {\n      this.getCustomerInfo(credentials.email);\n    } //basic authentication\n    // pass username and password to service for checking the credentials.\n    // this.authenticationService.authenticate(this.email?.value, this.password?.value).subscribe(\n    //   // response  should be of user type if authenticated successfully\n    //   response =>{\n    //     alert(\"logged in successfully\");\n    //   }\n    // );\n\n  }\n\n  getCustomerInfo(email) {\n    this.authenticationService.getCustomer(email).subscribe(response => {\n      console.log(\"response email is \" + response.email);\n      this.customer.email = response.email;\n      this.customer.firstName = response.firstName;\n      this.customer.lastName = response.lastName;\n      this.customer.password = response.password;\n      this.customer.phoneNumber = response.phoneNumber;\n      console.log(\"response email in customer object is \" + this.customer.email);\n      this.authenticationService.setCustomer(this.customer);\n    }, error => {\n      console.log(\"error occured while getting customer\");\n    });\n  }\n\n  delay(ms) {\n    return _asyncToGenerator(function* () {\n      yield new Promise(resolve => setTimeout(() => resolve(), ms)).then(() => console.log(\"fired\"));\n    })();\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthenticationService), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 28,\n  vars: 4,\n  consts: [[1, \"container\"], [1, \"m-4\"], [3, \"formGroup\", \"ngSubmit\"], [\"formGroupName\", \"customerLogin\", 1, \"form-area\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\"], [1, \"row\", \"mt-3\", \"mb-3\"], [\"for\", \"email\", 1, \"col-sm-3\", \"col-form-label\", \"col-form-label-lg\"], [1, \"col-sm-8\"], [\"formControlName\", \"email\", \"id\", \"email\", \"type\", \"email\", \"placeholder\", \"Enter your email\", 1, \"form-control\"], [\"class\", \"alert alert-danger mt-1\", 4, \"ngIf\"], [\"for\", \"password\", 1, \"col-sm-3\", \"col-form-label\", \"col-form-label-lg\"], [\"formControlName\", \"password\", \"id\", \"password\", \"type\", \"password\", \"placeholder\", \"Enter your Password\", 1, \"form-control\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 2, \"padding\", \"0.375rem 6.75rem\"], [1, \"d-flex\", \"justify-content-center\", \"text-lg-start\"], [1, \"fw-bold\", \"mt-2\", \"pt-1\", \"mb-0\"], [\"routerLink\", \"../register\", 1, \"link-danger\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-danger\", \"mt-1\"], [4, \"ngIf\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 0, \"div\", 4);\n      i0.ɵɵelementStart(5, \"h4\");\n      i0.ɵɵtext(6, \"Customer Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"label\", 7);\n      i0.ɵɵtext(10, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 8);\n      i0.ɵɵelement(12, \"input\", 9);\n      i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 3, 2, \"div\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\", 11);\n      i0.ɵɵtext(16, \"password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 8);\n      i0.ɵɵelement(18, \"input\", 12);\n      i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 3, 2, \"div\", 10);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(20, \"div\", 13)(21, \"button\", 14);\n      i0.ɵɵtext(22, \" Login \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"div\", 15)(24, \"p\", 16);\n      i0.ɵɵtext(25, \"Don't have an account? \");\n      i0.ɵɵelementStart(26, \"a\", 17);\n      i0.ɵɵtext(27, \"Register\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginFormGroup);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.invalidCredentials);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", (ctx.email == null ? null : ctx.email.invalid) && ((ctx.email == null ? null : ctx.email.dirty) || (ctx.email == null ? null : ctx.email.touched)));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.password == null ? null : ctx.password.invalid) && ((ctx.password == null ? null : ctx.password.dirty) || (ctx.password == null ? null : ctx.password.touched)));\n    }\n  },\n  directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormGroupName, i4.NgIf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i3.RouterLinkWithHref],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/Aman Kumar/Desktop/internship/ecommerce/ecommerce-frontend/ecommerce/src/app/components/login/login.component.ts"],"names":["FormControl","FormGroup","Validators","Credentials","Customer","i0","i1","i2","i3","i4","LoginComponent_div_4_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent_div_13_div_1_Template","LoginComponent_div_13_div_2_Template","LoginComponent_div_13_Template","ɵɵtemplate","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵproperty","email","errors","LoginComponent_div_19_div_1_Template","LoginComponent_div_19_div_2_Template","LoginComponent_div_19_Template","ctx_r2","password","LoginComponent","constructor","formbuilder","authenticationService","router","customer","isLoggedIn","loginFormGroup","invalidCredentials","ngOnInit","group","customerLogin","required","pattern","get","onSubmit","_a","_b","console","log","invalid","markAllAsTouched","credentials","value","generateToken","subscribe","response","token","loginCustomer","navigate","error","delay","getCustomerInfo","getCustomer","firstName","lastName","phoneNumber","setCustomer","ms","Promise","resolve","setTimeout","then","ɵfac","LoginComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","AuthenticationService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","LoginComponent_Template","ɵɵlistener","LoginComponent_Template_form_ngSubmit_2_listener","ɵɵelement","dirty","touched","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","FormGroupName","NgIf","DefaultValueAccessor","NgControlStatus","FormControlName","RouterLinkWithHref","styles"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Credentials } from 'src/app/common/credentials';\r\nimport { Customer } from 'src/app/common/customer';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"src/app/services/authentication.service\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nfunction LoginComponent_div_4_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 18);\r\n    i0.ɵɵtext(1, \" Invalid login credentials please check!!! \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_div_13_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1, \" Email is required \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_div_13_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1, \" Enter a valid email address \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_div_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 19);\r\n    i0.ɵɵtemplate(1, LoginComponent_div_13_div_1_Template, 2, 0, \"div\", 20);\r\n    i0.ɵɵtemplate(2, LoginComponent_div_13_div_2_Template, 2, 0, \"div\", 20);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.email == null ? null : ctx_r1.email.errors == null ? null : ctx_r1.email.errors[\"required\"]);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.email == null ? null : ctx_r1.email.errors == null ? null : ctx_r1.email.errors[\"pattern\"]);\r\n} }\r\nfunction LoginComponent_div_19_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1, \" password is required \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_div_19_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\r\n    i0.ɵɵtext(2, \"Enter a valid password.\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"p\");\r\n    i0.ɵɵtext(4, \"must contain a uppercase, lowecase , special character and digit. \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"p\");\r\n    i0.ɵɵtext(6, \"should be at least of 8 characters.\");\r\n    i0.ɵɵelementEnd()();\r\n} }\r\nfunction LoginComponent_div_19_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 19);\r\n    i0.ɵɵtemplate(1, LoginComponent_div_19_div_1_Template, 2, 0, \"div\", 20);\r\n    i0.ɵɵtemplate(2, LoginComponent_div_19_div_2_Template, 7, 0, \"div\", 20);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.password == null ? null : ctx_r2.password.errors == null ? null : ctx_r2.password.errors[\"required\"]);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.password == null ? null : ctx_r2.password.errors == null ? null : ctx_r2.password.errors[\"pattern\"]);\r\n} }\r\nexport class LoginComponent {\r\n    constructor(formbuilder, authenticationService, router) {\r\n        this.formbuilder = formbuilder;\r\n        this.authenticationService = authenticationService;\r\n        this.router = router;\r\n        this.customer = new Customer();\r\n        this.isLoggedIn = false;\r\n        this.loginFormGroup = new FormGroup({});\r\n        this.invalidCredentials = false;\r\n    }\r\n    ngOnInit() {\r\n        this.loginFormGroup = this.formbuilder.group({\r\n            customerLogin: this.formbuilder.group({\r\n                email: new FormControl('', [Validators.required,\r\n                    Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$')\r\n                ]),\r\n                password: new FormControl('', [Validators.required,\r\n                    Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}')\r\n                ])\r\n            }),\r\n        });\r\n    }\r\n    // getter for customer-login\r\n    get email() { return this.loginFormGroup.get('customerLogin.email'); }\r\n    get password() { return this.loginFormGroup.get('customerLogin.password'); }\r\n    onSubmit() {\r\n        var _a, _b;\r\n        console.log(\"submitting the login credentials\");\r\n        if (this.loginFormGroup.invalid) {\r\n            // so that every field which is not filled correctly shows error on submission until they gets correct data filled.\r\n            this.loginFormGroup.markAllAsTouched();\r\n            return;\r\n        }\r\n        //email and password are of valid form thus check for login\r\n        let credentials = new Credentials();\r\n        credentials.email = (_a = this.email) === null || _a === void 0 ? void 0 : _a.value;\r\n        credentials.password = (_b = this.password) === null || _b === void 0 ? void 0 : _b.value;\r\n        this.authenticationService.generateToken(credentials).subscribe((response) => {\r\n            //success\r\n            console.log(response.token);\r\n            this.authenticationService.loginCustomer(response.token);\r\n            this.router.navigate(['products']);\r\n            this.invalidCredentials = false;\r\n            this.isLoggedIn = this.authenticationService.isLoggedIn();\r\n            console.log(\"login successfull\");\r\n        }, error => {\r\n            this.invalidCredentials = true;\r\n            console.log(\"token not generated exception occured\");\r\n        });\r\n        this.delay(5000);\r\n        console.log(\"Is customer logged in \" + this.isLoggedIn);\r\n        if (this.isLoggedIn) {\r\n            this.getCustomerInfo(credentials.email);\r\n        }\r\n        //basic authentication\r\n        // pass username and password to service for checking the credentials.\r\n        // this.authenticationService.authenticate(this.email?.value, this.password?.value).subscribe(\r\n        //   // response  should be of user type if authenticated successfully\r\n        //   response =>{\r\n        //     alert(\"logged in successfully\");\r\n        //   }\r\n        // );\r\n    }\r\n    getCustomerInfo(email) {\r\n        this.authenticationService.getCustomer(email).subscribe((response) => {\r\n            console.log(\"response email is \" + response.email);\r\n            this.customer.email = response.email;\r\n            this.customer.firstName = response.firstName;\r\n            this.customer.lastName = response.lastName;\r\n            this.customer.password = response.password;\r\n            this.customer.phoneNumber = response.phoneNumber;\r\n            console.log(\"response email in customer object is \" + this.customer.email);\r\n            this.authenticationService.setCustomer(this.customer);\r\n        }, error => {\r\n            console.log(\"error occured while getting customer\");\r\n        });\r\n    }\r\n    async delay(ms) {\r\n        await new Promise(resolve => setTimeout(() => resolve(), ms)).then(() => console.log(\"fired\"));\r\n    }\r\n}\r\nLoginComponent.ɵfac = function LoginComponent_Factory(t) { return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthenticationService), i0.ɵɵdirectiveInject(i3.Router)); };\r\nLoginComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginComponent, selectors: [[\"app-login\"]], decls: 28, vars: 4, consts: [[1, \"container\"], [1, \"m-4\"], [3, \"formGroup\", \"ngSubmit\"], [\"formGroupName\", \"customerLogin\", 1, \"form-area\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\"], [1, \"row\", \"mt-3\", \"mb-3\"], [\"for\", \"email\", 1, \"col-sm-3\", \"col-form-label\", \"col-form-label-lg\"], [1, \"col-sm-8\"], [\"formControlName\", \"email\", \"id\", \"email\", \"type\", \"email\", \"placeholder\", \"Enter your email\", 1, \"form-control\"], [\"class\", \"alert alert-danger mt-1\", 4, \"ngIf\"], [\"for\", \"password\", 1, \"col-sm-3\", \"col-form-label\", \"col-form-label-lg\"], [\"formControlName\", \"password\", \"id\", \"password\", \"type\", \"password\", \"placeholder\", \"Enter your Password\", 1, \"form-control\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 2, \"padding\", \"0.375rem 6.75rem\"], [1, \"d-flex\", \"justify-content-center\", \"text-lg-start\"], [1, \"fw-bold\", \"mt-2\", \"pt-1\", \"mb-0\"], [\"routerLink\", \"../register\", 1, \"link-danger\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-danger\", \"mt-1\"], [4, \"ngIf\"]], template: function LoginComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\r\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_2_listener() { return ctx.onSubmit(); });\r\n        i0.ɵɵelementStart(3, \"div\", 3);\r\n        i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 0, \"div\", 4);\r\n        i0.ɵɵelementStart(5, \"h4\");\r\n        i0.ɵɵtext(6, \"Customer Login\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"label\", 7);\r\n        i0.ɵɵtext(10, \"Email\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"div\", 8);\r\n        i0.ɵɵelement(12, \"input\", 9);\r\n        i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 3, 2, \"div\", 10);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\", 11);\r\n        i0.ɵɵtext(16, \"password\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"div\", 8);\r\n        i0.ɵɵelement(18, \"input\", 12);\r\n        i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 3, 2, \"div\", 10);\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(20, \"div\", 13)(21, \"button\", 14);\r\n        i0.ɵɵtext(22, \" Login \");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(23, \"div\", 15)(24, \"p\", 16);\r\n        i0.ɵɵtext(25, \"Don't have an account? \");\r\n        i0.ɵɵelementStart(26, \"a\", 17);\r\n        i0.ɵɵtext(27, \"Register\");\r\n        i0.ɵɵelementEnd()()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.loginFormGroup);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.invalidCredentials);\r\n        i0.ɵɵadvance(9);\r\n        i0.ɵɵproperty(\"ngIf\", (ctx.email == null ? null : ctx.email.invalid) && ((ctx.email == null ? null : ctx.email.dirty) || (ctx.email == null ? null : ctx.email.touched)));\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"ngIf\", (ctx.password == null ? null : ctx.password.invalid) && ((ctx.password == null ? null : ctx.password.dirty) || (ctx.password == null ? null : ctx.password.touched)));\r\n    } }, directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormGroupName, i4.NgIf, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i3.RouterLinkWithHref], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}